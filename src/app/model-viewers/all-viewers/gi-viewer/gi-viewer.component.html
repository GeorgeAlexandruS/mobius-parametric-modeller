<div id="gi-viewer-container">
	<as-split direction="vertical">
		<as-split-area [size]="68" id="three-js">
			<threejs-viewer [model]='data' (eventClicked)="childEventClicked($event)" [attr_table_select]='attrTableSelect' (resetTableEvent) = "resetTable()"></threejs-viewer>
		</as-split-area>
		<as-split-area [size]='32' id="attrib">
			<attribute [data]="data" [refresh]="clickedEvent" [reset]="attrTableReset" (attrTableSelect) = "attribTableSelected($event)"></attribute>
			<button class='btn' id="settings_button" mat-icon-button (click)="openModal('settings_modal')" title="Settings"><mat-icon>settings</mat-icon></button>
			<modal-window id="settings_modal">
				<h1>Settings</h1>
				<tabs id="settingsTab">
					<tab tabTitle="Scene">
						<div class="mat-elevation-z1">
							<dl>
								<dd [title] = "!normalsEnabled?'No models available':''">
									<div class="label">Normals</div>
									<div class="onoffswitch">
										<input type="checkbox"
										name="onoffswitch"
										class="onoffswitch-checkbox"
										id="normalsOnOff"
										[checked]='settings.normals.show'
										[disabled] = "!normalsEnabled"
										(change)="settingOnChange('normals.show')"
										>
										<label class="onoffswitch-label" for="normalsOnOff">
											<span class="onoffswitch-inner"></span>
											<span class="onoffswitch-switch"></span>
										</label>
									</div>
									<div class="slidecontainer">
										<input type="range" min="1" max="100" step="1"
										[value]="settings.normals.size"
										class="slider" id="normalSize"
										(input)="settingOnChange('normals.size', $event.target.value)"
										[disabled] = "!normalsEnabled">
										<input type="text" [value]="settings.normals.size" disabled>
									</div>
								</dd>
								<dd>
									<div class="label">Axes</div>
									<div class="onoffswitch">
										<input type="checkbox"
										name="onoffswitch"
										class="onoffswitch-checkbox"
										id="axesOnOff"
										[checked]="settings.axes.show"
										(change)="settingOnChange('axes.show')">
										<label class="onoffswitch-label" for="axesOnOff">
											<span class="onoffswitch-inner"></span>
											<span class="onoffswitch-switch"></span>
										</label>
									</div>
									<div class="slidecontainer">
										<input type="range" min="1" max="1000" step="1" [value]="settings.axes.size" class="slider" id="axesSize" (input)="settingOnChange('axes.size', $event.target.value)">
										<input type="text" [value]="settings.axes.size" disabled>
									</div>
								</dd>
								<dd>
									<div class="label">Grid</div>
									<div class="onoffswitch">
										<input type="checkbox"
										name="onoffswitch"
										class="onoffswitch-checkbox"
										id="gridOnOff"
										[checked]='settings.grid.show'
										(change)="settingOnChange('grid.show')"
										>
										<label class="onoffswitch-label" for="gridOnOff">
											<span class="onoffswitch-inner"></span>
											<span class="onoffswitch-switch"></span>
										</label>
									</div>
									<div class="slidecontainer">
										<input type="range" min="10" max="10000" step="10" [value]="settings.grid.size" class="slider" id="gridSize" (input)="settingOnChange('grid.size', $event.target.value)">
										<input type="text" [value]="settings.grid.size" disabled>
									</div>
								</dd>
								<dd>
									<div class="label">Positions</div>
									<div class="onoffswitch">
										<input type="checkbox"
										name="onoffswitch"
										class="onoffswitch-checkbox"
										id="positionsOnOff"
										[checked]='settings.positions.show'
										(change)="settingOnChange('positions.show')"
										>
										<label class="onoffswitch-label" for="positionsOnOff">
											<span class="onoffswitch-inner"></span>
											<span class="onoffswitch-switch"></span>
										</label>
									</div>
									<div class="slidecontainer">
										<input type="range" min="0.1" max="10" step="0.1" [value]="settings.positions.size" class="slider" id="positionsSize" (input)="settingOnChange('positions.size', $event.target.value)">
										<input type="text" [value]="settings.positions.size" disabled>
									</div>
								</dd>
								<dd>
									<div class="label">Wireframe</div>
									<div class="onoffswitch">
										<input type="checkbox"
										name="onoffswitch"
										class="onoffswitch-checkbox"
										id="wireframeOnOff"
										[checked]='settings.wireframe.show'
										(change)="settingOnChange('wireframe.show')"
										>
										<label class="onoffswitch-label" for="wireframeOnOff">
											<span class="onoffswitch-inner"></span>
											<span class="onoffswitch-switch"></span>
										</label>
									</div>
								</dd>
								<dd>
									<div class="label">Threejs Summary</div>
									<div class="onoffswitch">
										<input type="checkbox"
										name="onoffswitch"
										class="onoffswitch-checkbox"
										id="tjs_summaryOnOff"
										[checked]='settings.tjs_summary.show'
										(change)="settingOnChange('tjs_summary.show')"
										>
										<label class="onoffswitch-label" for="tjs_summaryOnOff">
											<span class="onoffswitch-inner"></span>
											<span class="onoffswitch-switch"></span>
										</label>
									</div>
								</dd>
							</dl>
						</div>
					</tab>
					<tab tabTitle="Colors">
						<div class="mat-elevation-z1">
							<dl>
								<dd class='colors' *ngFor="let item of setting_colors">
									<div class="label">{{item.label}}</div>
									<input
									[(colorPicker)]="settings.colors[item.setting]"
									[style.background]="settings.colors[item.setting]"
									[value]="settings.colors[item.setting]"
									[class.light] = "checkColor(this.settings.colors[item.setting])"
									/>
									<button *ngIf="item.default" (click)="resetDefault('colors.viewer_bg','#E6E6E6');" class='filebtn closebtn'>Default</button>
								</dd>
							</dl>
						</div>
					</tab>
					<tab tabTitle="Light & Shadow">
						<div class="mat-elevation-z1">
							<dl>
								<dd>
									<div class="label">Daylight</div>
									<div class="onoffswitch">
										<input type="checkbox"
										name="onoffswitch"
										class="onoffswitch-checkbox"
										id="DaylightOnOff"
										[checked]='settings.day_light.show'
										(change)="settingOnChange('day_light.show')"
										>
										<label class="onoffswitch-label" for="DaylightOnOff">
											<span class="onoffswitch-inner"></span>
											<span class="onoffswitch-switch"></span>
										</label>
									</div>
									<div class="label" style="margin-left:90px">Helper</div>
									<div class="onoffswitch">
										<input type="checkbox"
										name="onoffswitch"
										class="onoffswitch-checkbox"
										id="DaylightHelperOnOff"
										[checked]='settings.day_light.helper'
										(change)="settingOnChange('day_light.helper')"
										>
										<label class="onoffswitch-label" for="DaylightHelperOnOff">
											<span class="onoffswitch-inner"></span>
											<span class="onoffswitch-switch"></span>
										</label>
									</div>
								</dd>
								<dd>
									<div class="label">Position</div>
									<div class="light-shadow">
										<input type="number" [value]="settings.day_light.position[0]" class="number" (input)="settingOnChange('day_light.p.x', $event.target.value)">
									</div>
									<div class="light-shadow">
										<input type="number" [value]="settings.day_light.position[1]" class="number" (input)="settingOnChange('day_light.p.y', $event.target.value)">
									</div>
									<div class="light-shadow">
										<input type="number" [value]="settings.day_light.position[2]" class="number" (input)="settingOnChange('day_light.p.z', $event.target.value)">
									</div>
								</dd>
								<dd>
									<div class="label">Intensity</div>
									<div class="slidecontainer light">
										<input type="range" min="0" max="1" step="0.01" [value]="settings.day_light.intensity" class="slider" (input)="settingOnChange('day_light.intensity', $event.target.value)">
										<input type="text" [value]="settings.day_light.intensity" disabled>
									</div>
								</dd>
								<dd>
									<div class="label">Size</div>
									<div class="slidecontainer light">
										<input type="range" min="0" max="100000" step="1000" [value]="settings.day_light.size" class="slider" (input)="settingOnChange('day_light.size', $event.target.value)">
										<input type="number" min="0" max="100000" [value]="settings.day_light.size" class="number" (input)="settingOnChange('day_light.size', $event.target.value)">
									</div>
								</dd>
								<dd><hr></dd>
								<dd>
									<div class="label">Ground</div>
									<div class="onoffswitch">
										<input type="checkbox"
										name="onoffswitch"
										class="onoffswitch-checkbox"
										id="GroundOnOff"
										[checked]='settings.ground.show'
										(change)="settingOnChange('ground.show')"
										>
										<label class="onoffswitch-label" for="GroundOnOff">
											<span class="onoffswitch-inner"></span>
											<span class="onoffswitch-switch"></span>
										</label>
									</div>
								</dd>
								<dd>
									<div class="label">Width</div>
									<div class="slidecontainer light">
										<input type="range" min="0" max="100000" step="100" [value]="settings.ground.width" class="slider" (input)="settingOnChange('ground.width', $event.target.value)">
										<input type="number" [value]="settings.ground.width" min="0" max="100000" class="number" (input)="settingOnChange('ground.width', $event.target.value)">
									</div>
								</dd>
								<dd>
									<div class="label">Length</div>
									<div class="slidecontainer light">
										<input type="range" min="0" max="100000" step="100" [value]="settings.ground.length" class="slider" (input)="settingOnChange('ground.length', $event.target.value)">
										<input type="number" [value]="settings.ground.length" min="0" max="100000" class="number" (input)="settingOnChange('ground.length', $event.target.value)">
									</div>
								</dd>
								<dd class='colors'>
									<div class="label">Color</div>
									<input
									[(colorPicker)]="settings.ground.color"
									[style.background]="settings.ground.color"
									[value]="settings.ground.color"
									[class.light] = "checkColor(settings.ground.color)"
									/>
									<button (click)="resetDefault('ground.color','#FFFFFF');" class='filebtn closebtn'>Default</button>
								</dd>
								<dd>
									<div class="label">Shininess</div>
									<div class="slidecontainer light">
										<input type="range" min="0" max="100" step="1" [value]="settings.ground.shininess" class="slider" (input)="settingOnChange('ground.shininess', $event.target.value)">
										<input type="number" min="0" max="100" [value]="settings.ground.shininess" class="number" (input)="settingOnChange('ground.shininess', $event.target.value)">
									</div>
								</dd>
							</dl>
							
						</div>
					</tab>
				</tabs>
				
				<button (click)="closeModal('settings_modal', true);" class="filebtn setting">Save</button>
				<button (click)="closeModal('settings_modal');" class='filebtn closebtn setting'>Close</button>
			</modal-window>
		</as-split-area>
	</as-split>
</div>
