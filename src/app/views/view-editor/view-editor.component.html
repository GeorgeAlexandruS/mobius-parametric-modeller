<div class='container'>
    <as-split direction="horizontal" (dragEnd)='setSplit($event)'>
        <as-split-area [size]="100 - dataService.splitVal">
            <panel-header [title]='dataService.flowchart.name'></panel-header>
            <!-- viewchild content -->
            <div class='content__panel'>

                <div class='container--editor' (mouseenter)='activateCopyPaste()'  (mouseleave)='deactivateCopyPaste()'
                (copy)='copyProd()' (cut)='cutProd($event)' (paste)='pasteProd($event)'>
                
                    <div class='container__content'>
                        <!-- toolset on the left side -->
                        <div class="container--toolset">
                            <toolset 
                            (delete)='deleteFunction($event)' 
                            (selected)='add($event)' 
                            (imported)='importFunction($event)'></toolset>
                        </div>
                        <!-- procedure editor on the right side -->
                        <div id='procedure' class="container--procedure" (click)='unselectAll($event)'>
                            <!-- parameter-editor only for start/end node -->
                            <parameter-editor *ngIf="dataService.node.type == 'start'" 
                                [flowchart]='dataService.flowchart' 
                                [node]='dataService.node'
                                [prodCheck]='false'></parameter-editor>

                            <div id='modelViewButton--container' *ngIf="dataService.node.type !== 'start'">
                                <button (click)='setViewOutput()'>Viewing 
                                    <span *ngIf='!dataService.modelOutputView'>Input Model</span>
                                    <span *ngIf='dataService.modelOutputView'>Output Model</span></button>
                            </div>

                            <div id='modelViewButton--container' *ngIf="dataService.node.type == 'start'">
                                <button (click)='setTestModel()'>
                                    <span *ngIf='dataService.testModel'>Viewing</span>
                                    <span *ngIf='!dataService.testModel'>Hiding</span>
                                Test Model</button>
                            </div>
                            
                            <div class = 'procedureln--container' [ngClass]="{'procedureln--container-start': dataService.node.type == 'start'}">
                                <!-- list of procedure items for all nodes -->
                                <div class = 'pro-container' [hidden]="!dataService.testModel && dataService.node.type == 'start'">
                                    <procedure-item 
                                    *ngFor="let line of dataService.node?.procedure; let idx=index" 
                                    [data]="line"
                                    (select)="selectProcedure($event,line)"
                                    (delete)="deleteChild(idx)"
                                    (helpText)='updateHelpView($event)'
                                    ></procedure-item>
                                </div>
                                <div class = 'divider--container' *ngIf="dataService.node.type !== ''">
                                    <div class = 'divider' *ngIf="dataService.node.type == 'start'"><span>Parameters</span></div>
                                    <div class = 'divider' *ngIf="dataService.node.type == 'end'"><span>Return</span></div>
                                </div>
                                <parameter-editor *ngIf="dataService.node.type !== ''" 
                                [flowchart]='dataService.flowchart' 
                                [node]='dataService.node'
                                [prodCheck]='true'></parameter-editor>
                                <div id = 'spacer'></div>
                                
                            </div>
                            <!-- <button class='modelViewButton' (click)='setViewOutput(true)'>View Output</button> -->

                            <br>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
        </as-split-area>

        <as-split-area [size]="dataService.splitVal">
            <!-- data viewers panel -->
            <div class='content__viewer' >
                <model-viewers-container [data]='viewerData()'></model-viewers-container>
            </div>
        </as-split-area>
        
    </as-split>

<notification [message]='notificationMessage' [dummyTrigger]='notificationTrigger'></notification>

</div>
<spinner></spinner>


